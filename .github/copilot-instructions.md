# Copilot review instructions for KEIS_CRM_PRO_AI

## Общий контекст

Это CRM-проект с:
- Бэкендом на Python (FastAPI / похожий стек), упакованным в Docker.
- Фронтендом на React + TypeScript + Vite.
- CI/CD через GitHub Actions, образы публикуются в GHCR и Docker Hub.
- Деплой на прод-сервер через docker compose в /srv/keis.

## Что важно при ревью

1. **Безопасность и надёжность**
   - Ищи возможные места для SQL-инъекций и XSS.
   - Обращай внимание на работу с токенами, паролями и секретами.
   - Проверяй, что конфиги/секреты не захардкожены в код.

2. **Бэкенд (Python)**
   - Проверяй типы, валидацию входных данных, обработку ошибок.
   - Замечания по структуре API, читаемости и упрощению логики.
   - Предлагай улучшения по логированию и обработке исключений.

3. **Фронтенд (React + TS + Vite)**
   - Следи за корректным использованием типов TypeScript.
   - Обращай внимание на повторяющийся код и сложные компоненты — предлагай упрощения.
   - Проверяй, что сетевые запросы используют правильный base URL (VITE_API_BASE /api).
   - Замечай потенциальные проблемы с производительностью и лишними рендерами.

4. **Docker и CI/CD**
   - Проверяй Dockerfile и workflows на:
     - кэширование сборки;
     - минимальный размер образа;
     - корректные теги образов и регистры (GHCR + Docker Hub).
   - Обращай внимание, чтобы деплой не ломал prod и staging.

5. **Стиль и структура**
   - Предлагай упрощение кода, если он излишне сложен.
   - Отмечай потенциальный технический долг, если изменения увеличивают сложность.

## Формат ответа Copilot

В ответе на ревью:
- Сначала дай короткое резюме (2–4 предложения).
- Затем список конкретных замечаний по пунктам:
  - [Критично]
  - [Важно]
  - [Небольшое улучшение]
- Если всё ок, явно напиши, что критичных проблем не найдено, и можно смело мержить после ручного просмотра.
